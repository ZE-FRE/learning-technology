<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.zefre.rabbitmq.mapper.MqSendTaskMapper">

    <update id="updateTaskStatus">
      UPDATE
            t_trans_mq_send_task
      SET
            status = #{status}
            <if test="updateNumFlag != null and 'true'.toString() == updateNumFlag.toString()">
                , sent_num = sent_num + 1
            </if>
      WHERE
            id = #{id}
    </update>

</mapper>
